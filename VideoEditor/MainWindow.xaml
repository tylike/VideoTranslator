<Window x:Class="VideoEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:videoPlayer="clr-namespace:VideoPlayer;assembly=VideoPlayer"
        xmlns:timeLine="clr-namespace:TimeLine.Controls;assembly=TimeLine"
        Title="VideoEditor" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        Closing="Window_Closing">
    <DockPanel>
        <!-- 菜单栏 -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="文件(_F)">
                <MenuItem Header="新建项目(_N)" Click="NewProject_Click"/>
                <MenuItem Header="新建项目(手动)(_M)" Click="NewProjectManual_Click"/>
                <MenuItem Header="打开项目(_P)" Click="OpenProject_Click"/>
                <MenuItem Header="编辑项目(_E)" Click="EditProject_Click"/>
                <MenuItem Header="保存项目(_S)" Click="SaveProject_Click"/>
                <MenuItem Header="关闭项目(_C)" Click="CloseProject_Click"/>
                <Separator/>
                <MenuItem Header="导入SRT(_I)" Click="ImportSrt_Click"/>
                <MenuItem Header="从YouTube导入(_Y)" Click="ImportFromYouTube_Click"/>
                <Separator/>
                <MenuItem Header="生成最终视频(_G)" Click="MergeVideoAndSubtitles_Click"/>
                <MenuItem Header="高质量生成视频(_H)" Click="MergeVideoAndSubtitlesHighQuality_Click"/>
                <Separator/>
                <MenuItem Header="发布到B站(_B)" Click="PublishToBilibili_Click"/>
                <Separator/>
                <MenuItem Header="退出(_X)" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="工具(_T)">
                <MenuItem Header="Vosk语音识别测试(_V)" Click="VoskTest_Click"/>
                <MenuItem Header="下载视频(_D)" Click="DownloadVideo_Click"/>
            </MenuItem>
        </Menu>
        
        <!-- 工具栏 -->
        <ToolBar DockPanel.Dock="Top" Height="35">
            <Button Content="新建项目" Click="NewProject_Click" ToolTip="新建项目(_N)"/>
            <Separator/>
            <Button Content="打开项目" Click="OpenProject_Click" ToolTip="打开项目(_P)"/>
            <Button Content="编辑项目" Click="EditProject_Click" ToolTip="编辑项目(_E)"/>
            <Button Content="保存项目" Click="SaveProject_Click" ToolTip="保存项目(_S)"/>
            <Separator/>
            <Button Content="导入SRT" Click="ImportSrt_Click" ToolTip="导入SRT(_I)"/>
            <Button Content="从YouTube导入" Click="ImportFromYouTube_Click" ToolTip="从YouTube导入(_Y)"/>
            <Separator/>
            <Button Content="自动处理音频" Click="AutoProcessAudio_Click" ToolTip="自动处理音频"/>
            <Separator/>
            <Button Content="媒体源" Click="MediaSource_Click" ToolTip="媒体源(_M)"/>
            <Separator/>
            <Button Content="生成最终视频" Click="MergeVideoAndSubtitles_Click" ToolTip="生成最终视频(_G)"/>
            <Button Content="高质量生成视频" Click="MergeVideoAndSubtitlesHighQuality_Click" ToolTip="高质量生成视频(_H)"/>
            <Button Content="发布到B站" Click="PublishToBilibili_Click" ToolTip="发布到B站(_B)"/>
            <Separator/>
            <Button Content="下载视频" Click="DownloadVideo_Click" ToolTip="下载视频(_D)"/>
        </ToolBar>
        
        <!-- 状态栏 -->
        <StatusBar DockPanel.Dock="Bottom" Height="30">
            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>
            <StatusBarItem Grid.Column="0">
                <TextBlock x:Name="statusText" Text="就绪" VerticalAlignment="Center"/>
            </StatusBarItem>
            <StatusBarItem Grid.Column="1">
                <Button x:Name="detailLogButton" Content="详细日志" Width="80" Height="22" Margin="0,0,10,0" Click="DetailLogButton_Click"/>
            </StatusBarItem>
            <StatusBarItem Grid.Column="2" HorizontalAlignment="Right">
                <ProgressBar x:Name="statusProgressBar" Width="200" Height="20" Minimum="0" Maximum="100" Value="0"/>
            </StatusBarItem>
        </StatusBar>
        
        <!-- 主内容区域 -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" x:Name="VideoRow"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*" x:Name="TimelineRow"/>
            </Grid.RowDefinitions>
            
            <!-- 上半部分：视频播放器 -->
            <Border Grid.Row="0" Background="Black" BorderBrush="#CCCCCC" BorderThickness="0,0,0,1">
                <videoPlayer:VideoPlayerControl x:Name="videoPlayerControl"/>
            </Border>
            
            <!-- 可拖动的分隔条 -->
            <GridSplitter Grid.Row="1" 
                          HorizontalAlignment="Stretch" 
                          VerticalAlignment="Center" 
                          Background="#CCCCCC"
                          Height="5"
                          ResizeDirection="Rows"
                          ResizeBehavior="PreviousAndNext"
                          ShowsPreview="True"/>
            
            <!-- 下半部分：时间轴 -->
            <Border Grid.Row="2" Background="#F5F5F5">
                <timeLine:SimpleTimeLinePanel x:Name="timeLinePanel" DurationBufferRatio="0.05"/>
            </Border>
        </Grid>
    </DockPanel>
</Window>
