<UserControl x:Class="VideoPlayer.VideoPlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:VideoPlayer"
             xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             Loaded="UserControl_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 视频显示区域 -->
        <Border Grid.Row="0" Background="Black" x:Name="videoBorder">
            <vlc:VideoView x:Name="videoView"/>
        </Border>
        
        <!-- 控制面板 -->
        <Border Grid.Row="1" Background="#FFF5F5F5" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Grid Grid.Row="0">
                     <Grid.ColumnDefinitions>
                         <ColumnDefinition Width="Auto"/>
                         <ColumnDefinition Width="Auto"/>
                         <ColumnDefinition Width="*"/>
                         <ColumnDefinition Width="Auto"/>
                         <ColumnDefinition Width="Auto"/>
                     </Grid.ColumnDefinitions>
                     
                     <!-- 播放模式选择按钮 -->
                     <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,10,0" VerticalAlignment="Center">
                         <TextBlock Text="播放模式:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                         <Button x:Name="originalVideoButton" Content="原始视频" 
                                 Style="{StaticResource ButtonStyle}" 
                                 Click="PlayModeButton_Click"
                                 Tag="OriginalVideo"
                                 Margin="0,0,2,0"
                                 Height="30"/>
                         <Button x:Name="mutedVideoWithAudioButton" Content="静音视频+音频" 
                                 Style="{StaticResource ButtonStyle}" 
                                 Click="PlayModeButton_Click"
                                 Tag="MutedVideoWithAudio"
                                 Margin="0,0,2,0"
                                 Height="30"/>
                         <Button x:Name="finalVideoButton" Content="最终视频" 
                                 Style="{StaticResource ButtonStyle}" 
                                 Click="PlayModeButton_Click"
                                 Tag="FinalVideo"
                                 Height="30"/>
                     </StackPanel>
                     
                     <!-- 播放控制按钮 -->
                     <StackPanel Grid.Column="1" Orientation="Horizontal">
                         <Button x:Name="playButton" Content="▶" Style="{StaticResource ButtonStyle}" Click="PlayButton_Click"/>
                         <Button x:Name="pauseButton" Content="⏸" Style="{StaticResource ButtonStyle}" Click="PauseButton_Click"/>
                         <Button x:Name="stopButton" Content="⏹" Style="{StaticResource ButtonStyle}" Click="StopButton_Click"/>
                     </StackPanel>
                     
                     <!-- 进度条 -->
                     <StackPanel Grid.Column="2" Margin="10,0" VerticalAlignment="Center">
                         <Slider x:Name="progressSlider" 
                                 Style="{StaticResource SliderStyle}"
                                 ValueChanged="ProgressSlider_ValueChanged"
                                 PreviewMouseLeftButtonDown="ProgressSlider_PreviewMouseLeftButtonDown"
                                 PreviewMouseLeftButtonUp="ProgressSlider_PreviewMouseLeftButtonUp"/>
                         <Grid Margin="0,5,0,0">
                             <Grid.ColumnDefinitions>
                                 <ColumnDefinition Width="Auto"/>
                                 <ColumnDefinition Width="*"/>
                                 <ColumnDefinition Width="Auto"/>
                             </Grid.ColumnDefinitions>
                             <TextBlock x:Name="currentTimeText" Grid.Column="0" Text="00:00" HorizontalAlignment="Left"/>
                             <TextBlock x:Name="totalTimeText" Grid.Column="2" Text="00:00" HorizontalAlignment="Right"/>
                         </Grid>
                     </StackPanel>
                     
                     <!-- 音量控制 -->
                     <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                         <TextBlock Text="音量:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                         <Slider x:Name="volumeSlider" 
                                 Width="100" 
                                 Minimum="0" 
                                 Maximum="1" 
                                 Value="0.5"
                                 Style="{StaticResource SliderStyle}"
                                 ValueChanged="VolumeSlider_ValueChanged"/>
                         <TextBlock x:Name="volumeText" Text="50%" VerticalAlignment="Center" Margin="5,0,0,0" Width="40"/>
                     </StackPanel>
                     
                     <!-- 字幕选择 -->
                     <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                         <TextBlock Text="字幕:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                         <ComboBox x:Name="subtitleComboBox" Width="120" SelectionChanged="SubtitleComboBox_SelectionChanged"/>
                     </StackPanel>
                 </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>